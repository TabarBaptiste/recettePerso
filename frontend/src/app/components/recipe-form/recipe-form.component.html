<div class="container mx-auto px-4 py-8">
  <div class="max-w-3xl mx-auto">
    <h1 class="text-3xl md:text-4xl font-bold text-green-deep mb-8">
      {{ isEditMode ? 'Modifier la recette' : 'Nouvelle recette' }}
    </h1>

    @if (error) {
      <div class="bg-red-50 text-red-600 px-6 py-4 rounded-xl shadow-md mb-6">
        {{ error }}
      </div>
    }

    @if (loading && isEditMode) {
      <div class="flex justify-center items-center py-12">
        <div class="animate-spin rounded-full h-12 w-12 border-b-2 border-green-deep"></div>
      </div>
    }

    @if (!loading || !isEditMode) {
      <form (ngSubmit)="onSubmit()" class="bg-white rounded-xl shadow-lg p-6 md:p-8 space-y-6">
        <div>
          <label for="title" class="block text-sm font-medium text-gray-700 mb-2">
            Titre de la recette <span class="text-red-500">*</span>
          </label>
          <input
            type="text"
            id="title"
            [(ngModel)]="recipe.title"
            name="title"
            required
            class="w-full px-4 py-3 border border-gray-300 rounded-lg focus:outline-none focus:ring-2 focus:ring-green-deep focus:border-transparent"
            placeholder="Ex: Tarte aux pommes">
        </div>

        <div>
          <label for="duration" class="block text-sm font-medium text-gray-700 mb-2">
            Durée (minutes)
          </label>
          <input
            type="number"
            id="duration"
            [(ngModel)]="recipe.duration"
            name="duration"
            min="1"
            class="w-full px-4 py-3 border border-gray-300 rounded-lg focus:outline-none focus:ring-2 focus:ring-green-deep focus:border-transparent"
            placeholder="Ex: 45">
        </div>

        <div>
          <label for="imageUrl" class="block text-sm font-medium text-gray-700 mb-2">
            URL de l'image
          </label>
          <input
            type="url"
            id="imageUrl"
            [(ngModel)]="recipe.imageUrl"
            name="imageUrl"
            class="w-full px-4 py-3 border border-gray-300 rounded-lg focus:outline-none focus:ring-2 focus:ring-green-deep focus:border-transparent"
            placeholder="https://example.com/image.jpg">
        </div>

        <div>
          <label for="ingredients" class="block text-sm font-medium text-gray-700 mb-2">
            Ingrédients <span class="text-red-500">*</span>
          </label>
          <textarea
            id="ingredients"
            [(ngModel)]="recipe.ingredients"
            name="ingredients"
            required
            rows="8"
            class="w-full px-4 py-3 border border-gray-300 rounded-lg focus:outline-none focus:ring-2 focus:ring-green-deep focus:border-transparent"
            placeholder="Ex:&#10;- 3 pommes&#10;- 200g de farine&#10;- 100g de sucre&#10;- 2 œufs"></textarea>
        </div>

        <div>
          <label for="steps" class="block text-sm font-medium text-gray-700 mb-2">
            Étapes de préparation <span class="text-red-500">*</span>
          </label>
          <textarea
            id="steps"
            [(ngModel)]="recipe.steps"
            name="steps"
            required
            rows="10"
            class="w-full px-4 py-3 border border-gray-300 rounded-lg focus:outline-none focus:ring-2 focus:ring-green-deep focus:border-transparent"
            placeholder="Ex:&#10;1. Préchauffer le four à 180°C&#10;2. Éplucher et couper les pommes&#10;3. Mélanger la farine et le sucre&#10;..."></textarea>
        </div>

        <div class="flex flex-col sm:flex-row space-y-3 sm:space-y-0 sm:space-x-4 pt-4">
          <button
            type="button"
            (click)="cancel()"
            class="flex-1 px-6 py-3 bg-gray-200 text-gray-700 rounded-lg hover:bg-gray-300 transition-colors">
            Annuler
          </button>
          <button
            type="submit"
            [disabled]="loading"
            class="flex-1 px-6 py-3 bg-green-deep text-white rounded-lg hover:bg-green-dark transition-colors disabled:opacity-50 disabled:cursor-not-allowed">
            {{ loading ? 'Enregistrement...' : (isEditMode ? 'Mettre à jour' : 'Créer') }}
          </button>
        </div>
      </form>
    }
  </div>
</div>
